import{l as L,d as M}from"./tagManagement.84fa5adb.js";import{_ as P,d as W,r as p,k as z,q as j,e as A,c as a,w as t,M as k,j as l,o as i,m as u,l as _,t as B,f as q,p as I}from"./index.65e92f72.js";const R={class:"tag-list"},U={key:0,class:"load-more"},G={class:"total-count"},H=W({__name:"TagList",setup(J){const g=p(!1),m=p(!1),d=p([]),n=p({current:1,pageSize:10,total:0}),F=p(window.innerWidth<768),E=()=>{F.value=window.innerWidth<768};z(()=>{window.addEventListener("resize",E)}),j(()=>{window.removeEventListener("resize",E)});const c=async(s=!1)=>{try{s?m.value=!0:g.value=!0;const e=await L({offset:(n.value.current-1)*n.value.pageSize,limit:n.value.pageSize});console.log(e),s?d.value=[...d.value,...e.list||[]]:d.value=e.list||[],n.value.total=e.total||0}catch{k.error("\u83B7\u53D6\u6807\u7B7E\u5217\u8868\u5931\u8D25")}finally{s?m.value=!1:g.value=!1}},C=async s=>{try{await M(s),k.success("\u5220\u9664\u6210\u529F"),c()}catch{k.error("\u5220\u9664\u5931\u8D25")}},w=s=>{n.value.current=s,c()};return z(()=>{c()}),(s,e)=>{const r=l("a-button"),$=l("a-page-header"),f=l("a-table-column"),v=l("a-tag"),D=l("a-link"),b=l("a-popconfirm"),x=l("a-space"),T=l("a-table"),S=l("a-list-item-meta"),N=l("a-list-item"),O=l("a-list"),V=l("a-card");return i(),A("div",R,[a($,{title:"\u6807\u7B7E\u7BA1\u7406",subtitle:"\u7BA1\u7406\u6587\u7AE0\u6807\u7B7E"},{extra:t(()=>[a(r,{type:"primary",onClick:e[0]||(e[0]=o=>s.$router.push("/tags/add"))},{default:t(()=>e[2]||(e[2]=[u(" \u6DFB\u52A0\u6807\u7B7E ")])),_:1,__:[2]})]),_:1}),a(V,null,{default:t(()=>[F.value?(i(),_(O,{key:1,loading:g.value,"loading-more":m.value,data:d.value,pagination:n.value,onPageChange:w},{item:t(({item:o})=>[a(N,null,{default:t(()=>[a(S,null,{title:t(()=>[u(B(o.name)+" ",1),o.status===1?(i(),_(v,{key:0,color:"green",size:"small"},{default:t(()=>e[8]||(e[8]=[u("\u542F\u7528")])),_:1,__:[8]})):(i(),_(v,{key:1,color:"red",size:"small"},{default:t(()=>e[9]||(e[9]=[u("\u7981\u7528")])),_:1,__:[9]}))]),description:t(()=>[u(" \u521B\u5EFA\u65F6\u95F4: "+B(o.created_at),1)]),_:2},1024),a(x,null,{default:t(()=>[a(r,{type:"text",size:"small",onClick:y=>s.$router.push(`/tags/edit/${o.id}`)},{default:t(()=>e[10]||(e[10]=[u(" \u7F16\u8F91 ")])),_:2,__:[10]},1032,["onClick"]),a(b,{content:"\u786E\u8BA4\u5220\u9664\u8BE5\u6807\u7B7E\uFF1F",onOk:y=>C(o.id)},{default:t(()=>[a(r,{type:"text",status:"danger",size:"small"},{default:t(()=>e[11]||(e[11]=[u("\u5220\u9664")])),_:1,__:[11]})]),_:2},1032,["onOk"])]),_:2},1024)]),_:2},1024)]),footer:t(()=>[n.value.current*n.value.pageSize<n.value.total?(i(),A("div",U,[a(r,{type:"primary",loading:m.value,onClick:e[1]||(e[1]=()=>{n.value.current++,c(!0)})},{default:t(()=>e[12]||(e[12]=[u(" \u52A0\u8F7D\u66F4\u591A ")])),_:1,__:[12]},8,["loading"]),q("div",G," \u5171 "+B(n.value.total)+" \u6761 ",1)])):I("",!0)]),_:1},8,["loading","loading-more","data","pagination"])):(i(),_(T,{key:0,loading:g.value,data:d.value,pagination:n.value,onPageChange:w},{columns:t(()=>[a(f,{title:"\u6807\u7B7E\u540D\u79F0","data-index":"name"}),a(f,{title:"\u72B6\u6001","data-index":"status"},{cell:t(({record:o})=>[o.status===1?(i(),_(v,{key:0,color:"green"},{default:t(()=>e[3]||(e[3]=[u("\u542F\u7528")])),_:1,__:[3]})):(i(),_(v,{key:1,color:"red"},{default:t(()=>e[4]||(e[4]=[u("\u7981\u7528")])),_:1,__:[4]}))]),_:1}),a(f,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"created_at"}),a(f,{title:"\u64CD\u4F5C"},{cell:t(({record:o})=>[a(x,null,{default:t(()=>[a(D,{type:"primary",target:"_blank",href:`/feed/tag/${o.id}.rss`},{default:t(()=>e[5]||(e[5]=[u(" \u8BA2\u9605 ")])),_:2,__:[5]},1032,["href"]),a(r,{type:"text",onClick:y=>s.$router.push(`/tags/edit/${o.id}`)},{default:t(()=>e[6]||(e[6]=[u(" \u7F16\u8F91 ")])),_:2,__:[6]},1032,["onClick"]),a(b,{content:"\u786E\u8BA4\u5220\u9664\u8BE5\u6807\u7B7E\uFF1F",onOk:y=>C(o.id)},{default:t(()=>[a(r,{type:"text",status:"danger"},{default:t(()=>e[7]||(e[7]=[u("\u5220\u9664")])),_:1,__:[7]})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["loading","data","pagination"]))]),_:1})])}}});var X=P(H,[["__scopeId","data-v-b1be13dc"]]);export{X as default};
